<template>
  <div>
    <input type="file" @change="this.change.bind(this)"/>
    <button @click="this.play.bind(this)">播放</button>
    <button @click="this.pause.bind(this)">暂停</button>
    <button @click="this.start.bind(this)">开始</button>
    <button @click="this.stop.bind(this)">停止</button>
  </div>
</template>

<script>
  import Grass from '@rustle/grass'
  import dealWithMusic from './music'

  export default class Root extends Grass.Component {
    constructor () {
      super()
      this.Hearken = null
    }
    
    change (e) {
      const file = e.target.files[0]
      const render = new FileReader()

      render.readAsArrayBuffer(file)
      render.onload = () => {
        this.Hearken = dealWithMusic(render.result)
      }
    }

    play () {
      if (this.Hearken) {
        this.Hearken.play()
      }
    }

    pause () {
      if (this.Hearken) {
        this.Hearken.pause()
      }
    }

    start () {
      if (this.Hearken) {
        this.Hearken.start()
      }
    }

    stop () {
      if (this.Hearken) {
        this.Hearken.stop()
      }
    }
  }
</script>